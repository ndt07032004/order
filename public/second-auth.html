<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Bước 2 - Nhập mật khẩu</title>
    <link rel="stylesheet" href="/css/auth.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="auth-wrap">
      <div class="auth-card">
        <div class="auth-side">
          <div class="auth-logo">
            <svg width="42" height="42" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
              <rect width="48" height="48" rx="10" fill="url(#g)"/>
              <path d="M14 33 L24 18 L34 33" stroke="white" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round" fill="none" />
              <defs><linearGradient id="g" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#ff7a00"/><stop offset="1" stop-color="#ff4b4b"/></linearGradient></defs>
            </svg>
            <div>
              <div class="auth-brand"> ĐẶNG NGÂN</div>
              <div style="font-size:0.92rem;color:rgba(255,255,255,0.85)">Khu vực quản trị</div>
            </div>
          </div>
          <h1>Xác thực bảo mật</h1>
          <p>Nhập mật khẩu bổ sung để truy cập trang quản lý.</p>
        </div>
        <div class="auth-form">
          <h3>Xác nhận bước 2</h3>
          <p class="auth-sub">Nhập mật khẩu bổ sung để truy cập trang quản lý.</p>
          <input id="pw" class="auth-input" type="password" placeholder="Mật khẩu bước 2">
          <div class="auth-actions"><button id="btn" class="auth-btn">Tiếp tục</button></div>
          <p id="msg" class="auth-msg"></p>
        </div>
      </div>
    </div>

  <script>
    document.getElementById('btn').addEventListener('click', async () => {
      const pw = document.getElementById('pw').value.trim();
      if(!pw) return document.getElementById('msg').innerText = 'Nhập mật khẩu.';
      const res = await fetch('/api/second-auth', { method:'POST', headers:{'content-type':'application/json'}, body: JSON.stringify({ password: pw }) });
      const j = await res.json();
      if (j.success) window.location.href = '/private/quan-ly.html';
      else document.getElementById('msg').innerText = j.message || 'Sai mật khẩu.';
    });
  </script>
</body>
</html>